(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{103:function(e,t,n){},105:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(76),c=n.n(l),o=n(10),i=n(5),u=n(79),m=n(80),s=n(113),d=n(52),E=(n(101),n(16)),p=Object(E.a)(),f=(n(103),n(105),n(114)),b=n(47),v=n(43),h={tracklist:[{id:1234,name:"My super track"}]},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TRACK":return Object(v.a)({},e,{tracklist:Object(b.a)(e.tracklist).concat([t.payload])});case"FETCH_TRACKS_SUCCESS":return t.payload;default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return"FIND_TRACK"===t.type?t.payload:e},N={users:[{id:1234,name:"\u0410\u043d\u043e\u043d\u0438\u043c"},{id:1235,name:"George",last_name:"Markosov",email:"george@mail.com",sex:"male"}]},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return{users:Object(b.a)(e.users)};case"REGISTER":return Object(v.a)({},e,{users:Object(b.a)(e.users).concat([t.payload])});default:return e}},S=n(84),k=n(112),j=n(111),w=n(108),T=function(){return r.a.createElement("nav",{className:"nav-tabs nav-stacked"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(w.a,{to:"/"},"Tracks")),r.a.createElement("li",null,r.a.createElement(w.a,{to:"/about"},"About")),r.a.createElement("li",null,r.a.createElement(w.a,{to:"/users"},"Users")),r.a.createElement("li",null,r.a.createElement(w.a,{to:"/register"},"Register")),r.a.createElement("li",null,r.a.createElement(w.a,{to:"/login"},"Logout"))))},C=function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement(T,null)),r.a.createElement("div",{className:"col-md-9"},r.a.createElement("h2",null,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 about"))))},R=Object(o.connect)(function(e,t){return{track:e.tracks.tracklist.find(function(e){return e.id===Number(t.match.params.id)})}})(function(e){var t=e.track;return r.a.createElement("div",null,t.name)}),_=n(57),I=n(58),U=n(63),L=n(59),G=n(65),A={LOGIN_REQUEST:"USERS_LOGIN_REQUEST",LOGIN_SUCCESS:"USERS_LOGIN_SUCCESS",LOGIN_FAILURE:"USERS_LOGIN_FAILURE",LOGOUT:"USERS_LOGOUT"},x={login:function(e,t){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})};return fetch("/users/authenticate",n).then(F).then(function(e){return e.token&&localStorage.setItem("user",JSON.stringify(e)),e})},logout:D};function D(){localStorage.removeItem("user")}function F(e){return e.text().then(function(t){var n=t&&JSON.parse(t);if(!e.ok){401===e.status&&(D(),window.location.reload(!0));var a=n&&n.message||e.statusText;return Promise.reject(a)}return n})}var J=function(e,t){return function(n){var a;n((a={username:e},{type:A.LOGIN_REQUEST,user:a})),x.login(e,t).then(function(e){n(function(e){return{type:A.LOGIN_SUCCESS,user:e}}(e)),window.location.hash="/"},function(e){n(function(e){return{type:A.LOGIN_FAILURE,error:e}}(e))})}},P=function(){return x.logout(),{type:A.LOGOUT}},K=n(110),M=n(109),H=function(e){return e?void 0:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e"},Q=function(e){var t=e.input,n=e.label,a=e.type,l=e.meta,c=l.touched,o=l.error,i=l.warning;return r.a.createElement("div",null,r.a.createElement("label",null,n),r.a.createElement("div",null,r.a.createElement("input",Object.assign({},t,{placeholder:n,type:a})),c&&(o&&r.a.createElement("span",null,o)||i&&r.a.createElement("span",null,i))))},W=function(e){function t(){return Object(_.a)(this,t),Object(U.a)(this,Object(L.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(I.a)(t,[{key:"componentDidMount",value:function(){this.props.logout()}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=e.pristine,a=e.submitting,l=e.login,c=t(function(e){l(e.login,e.password)});return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("h2",null,"\u0412\u0445\u043e\u0434"),r.a.createElement("div",{className:"alert alert-info"},"\u041b\u043e\u0433\u0438\u043d: test",r.a.createElement("br",null),"\u041f\u0430\u0440\u043e\u043b\u044c: test"),r.a.createElement("form",{onSubmit:c},r.a.createElement("div",null,r.a.createElement("label",null,"\u041b\u043e\u0433\u0438\u043d"),r.a.createElement("div",null,r.a.createElement(K.a,{name:"login",component:Q,type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d",validate:[H]}))),r.a.createElement("div",null,r.a.createElement("label",null,"\u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement("div",null,r.a.createElement(K.a,{name:"password",component:Q,type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",validate:[H]}))),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",type:"submit",disabled:n||a},"\u0412\u043e\u0439\u0442\u0438"))))))}}]),t}(r.a.Component),B=Object(o.connect)(function(e){return{users:e.login.users}},function(e){return Object(i.bindActionCreators)({login:J,logout:P},e)})(W),q=Object(M.a)({form:"login"})(B),V=function(e){return function(t){t({type:"REGISTER",payload:Object(v.a)({id:Date.now()},e)})}},z=function(e){return e?void 0:"Required"},X=Object(o.connect)(function(e){return{users:e.login.users}},function(e){return Object(i.bindActionCreators)({register:V},e)})(function(e){var t=e.handleSubmit,n=e.pristine,a=e.reset,l=e.submitting,c=e.register,o=t(function(e){c(e),window.alert("\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c, ".concat(e.name))});return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement(T,null)),r.a.createElement("div",{className:"col-md-9"},r.a.createElement("h2",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("form",{onSubmit:o},r.a.createElement("div",null,r.a.createElement("label",null,"\u0418\u043c\u044f"),r.a.createElement("div",null,r.a.createElement(K.a,{name:"name",component:"input",type:"text",placeholder:"\u0418\u043c\u044f",validate:[z]}))),r.a.createElement("div",null,r.a.createElement("label",null,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),r.a.createElement("div",null,r.a.createElement(K.a,{name:"lastName",component:"input",type:"text",placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"}))),r.a.createElement("div",null,r.a.createElement("label",null,"Email"),r.a.createElement("div",null,r.a.createElement(K.a,{name:"email",component:"input",type:"email",placeholder:"Email"}))),r.a.createElement("div",null,r.a.createElement("label",null,"\u041f\u043e\u043b"),r.a.createElement("div",null,r.a.createElement("label",null,r.a.createElement(K.a,{name:"sex",component:"input",type:"radio",value:"male"})," ","\u041c\u0443\u0436"),r.a.createElement("label",null,r.a.createElement(K.a,{name:"sex",component:"input",type:"radio",value:"female"})," ","\u0416\u0435\u043d"))),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",type:"submit",disabled:n||l},"Submit"),r.a.createElement("button",{className:"btn btn-danger",type:"button",disabled:n||l,onClick:a},"Clear Values"))))))}),Y=Object(M.a)({form:"simple"})(X),Z=Object(o.connect)(function(e){return{users:e.login.users}})(function(e){var t=e.users.map(function(e){return r.a.createElement("li",{key:e.id},e.name)});return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement(T,null)),r.a.createElement("div",{className:"col-md-9"},r.a.createElement("h2",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439"),t)))}),$={tracklist:[{id:1,name:"Enter Sandman"},{id:2,name:"Welcome Home"},{id:3,name:"Master of Puppets"},{id:4,name:"Fade to Black"}]},ee=function(){return function(e){setTimeout(function(){e({type:"FETCH_TRACKS_SUCCESS",payload:$})},2e3)}},te=function(e){return function(t){t({type:"ADD_TRACK",payload:{id:Date.now().toString(),name:e}})}},ne=function(e){return function(t){t({type:"FIND_TRACK",payload:e})}},ae=function(e){function t(){return Object(_.a)(this,t),Object(U.a)(this,Object(L.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this.props,t=e.getTracks,n=e.tracks,a=e.addTrack,l=e.findTrack,c="",o="";return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement(T,null)),r.a.createElement("div",{className:"col-md-9"},r.a.createElement("h2",null,"\u0422\u0440\u044d\u043a\u0438"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",ref:function(e){c=e}}),r.a.createElement("button",{className:"btn btn-secondary",onClick:function(){a(c.value),c.value=""}},"Add")),r.a.createElement("div",null,r.a.createElement("input",{type:"text",ref:function(e){o=e}}),r.a.createElement("button",{className:"btn btn-secondary",onClick:function(){l(o.value)}},"Find")),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-secondary",onClick:t},"Load")),r.a.createElement("ul",null,n.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(w.a,{to:"/tracks/".concat(e.id)},e.name))})))))}}]),t}(r.a.Component),re=Object(o.connect)(function(e){return{tracks:e.tracks.tracklist.filter(function(t){return t.name.includes(e.filterTracks)})}},function(e){return Object(i.bindActionCreators)({getTracks:ee,addTrack:te,findTrack:ne},e)})(ae),le=function(e){var t=e.component,n=Object(S.a)(e,["component"]);return r.a.createElement(k.a,Object.assign({},n,{render:function(e){return localStorage.getItem("user")?r.a.createElement(t,e):r.a.createElement(j.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},ce=r.a.createElement("div",null,r.a.createElement(le,{exact:!0,path:"/",component:re}),r.a.createElement(le,{path:"/about",component:C}),r.a.createElement(k.a,{path:"/login",component:q}),r.a.createElement(le,{path:"/register",component:Y}),r.a.createElement(le,{path:"/users",component:Z}),r.a.createElement(le,{path:"/tracks/:id",component:R}));!function(){var e=[{id:1,username:"test",password:"test",firstName:"George",lastName:"Markosov"}],t=window.fetch;window.fetch=function(n,a){return new Promise(function(r,l){if(n.endsWith("/users/authenticate")&&"POST"===a.method){var c=JSON.parse(a.body),o=e.filter(function(e){return e.username===c.username&&e.password===c.password});if(o.length){var i=o[0],u={id:i.id,username:i.username,firstName:i.firstName,lastName:i.lastName,token:"jwt-token"};r({ok:!0,text:function(){return Promise.resolve(JSON.stringify(u))}})}else l("Username or password is incorrect")}else t(n,a).then(function(e){return r(e)})})}}();var oe,ie=Object(i.createStore)((oe=p,Object(i.combineReducers)({router:Object(d.connectRouter)(oe),form:f.a,tracks:O,filterTracks:y,login:g})),Object(u.composeWithDevTools)(Object(i.applyMiddleware)(m.a)));c.a.render(r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(o.Provider,{store:ie},r.a.createElement(d.ConnectedRouter,{history:p},r.a.createElement(s.a,null,ce))))),document.getElementById("root"))},85:function(e,t,n){e.exports=n(107)}},[[85,2,1]]]);
//# sourceMappingURL=main.72f77aa5.chunk.js.map